/*  Fuse JavaScript framework, version Alpha
 *  (c) 2008-2010 John-David Dalton
 *
 *  FuseJS is freely distributable under the terms of an MIT-style license.
 *  For details, see the FuseJS web site: http://www.fusejs.com/
 *
 *--------------------------------------------------------------------------*/
 
(function(m){var x,X={"boolean":1,number:1,string:1,undefined:1},u=[],y="_fbx"+String(+new Date).slice(-6),I=function(d,k){var h=typeof d[k];return h==="object"?!!d[k]:!X[h]},r=function(){var d,k=m.document;list=[];backup=list.__proto__;if(I(m,"ActiveXObject")&&m.location&&m.location.protocol!=="file:")try{return d=new ActiveXObject("htmlfile")&&1}catch(h){}if([].__proto__===Array.prototype&&{}.__proto__===Object.prototype){list.__proto__={};d=typeof list.push==="undefined";list.__proto__=backup;if(d&&typeof list.push==="function")return 2}if(I(m,"frames")&&k&&I(k,"createElement"))return 3}(),L=function(){if(r===2)return function(){return m};var d=0,k=m.document;if(r===1)return function(){var h=new ActiveXObject("htmlfile");h.open();h.write("<script>document.global = this;<\/script>");h.close();u.push(h);return h.global};if(r===3)return function(){var h,c,p=k.body||k.documentElement,n="sb_"+y+d++;try{c=k.createElement('<iframe name="'+n+'">')}catch(j){(c=k.createElement("iframe")).name=n}c.style.display="none";p.insertBefore(c,p.firstChild);try{(h=m.frames[n].document).open();h.write("<script>parent.Fusebox."+y+" = this;<\/script>");h.close()}catch(J){throw new Error("Fusebox failed to create a sandbox by iframe.");}h=m.Fusebox[y];delete m.Fusebox[y];u.push(c);return h};return function(){throw new Error("Fusebox failed to create a sandbox.");}}(),W=function(){var d,k,h,c,p,n,j,J=m.Array.prototype.slice,Y=m.Function,s=new O,Z=/^\s*(['"])use strict\1/;h=L();var M=m.Object.prototype.toString,q=h.Array,o=h.Date,z=h.Function,A=h.Number,E=h.Object,F=h.RegExp,v=h.String;if(r===2){d=function(a){var b;b=arguments;var f=b.length;b=f?f===1&&a>-1?new q(a):d.fromArray(b):new q;b.__proto__=i;return b};k=function(a,b,f,l,w,B,C){var G;if(this.constructor===k){G=arguments.length===1?new o(a):new o(a,b,f||1,l||0,w||0,B||0,C||0);G.__proto__=e}else G=j(new o);return G};h=function(a,b){var f=arguments;f=f.length<3?z(a,b):z.apply(z,f);f.__proto__=P;return f};c=function(a){a=new A(a);a.__proto__=t;return a};p=function(a){if(a!=null){switch(M.call(a)){case"[object Boolean]":return new Boolean(a);case"[object Number]":return c(a);case"[object String]":return j(a);case"[object Array]":if(a.constructor!==d)return d.fromArray(a)}return a}a=new E;a.__proto__=Q;return a};n=function(a,b){a=new F(a,b);a.__proto__=H;return a};j=function(a){var b=new v(arguments.length?a:"");b.__proto__=g;return b};d.prototype.__proto__=q.prototype;k.prototype.__proto__=o.prototype;h.prototype.__proto__=z.prototype;c.prototype.__proto__=A.prototype;p.prototype.__proto__=E.prototype;n.prototype.__proto__=F.prototype;j.prototype.__proto__=v.prototype}else{d=function(a){var b=arguments,f=b.length;if(f)return f===1&&a>-1?new q(a):d.fromArray(b);return new q};k=function(a,b,f,l,w,B,C){if(this.constructor===k)return arguments.length===1?new o(a):new o(a,b,f||1,l||0,w||0,B||0,C||0);return j(new o)};h=function(a,b){function f(){return w}var l;l=J.call(arguments,0);var w=b=l.pop();a=l.join(",");if(b&&b.search(Z)<0)b="arguments.callee = arguments.callee."+y+"; "+b;l=new Y(a,b);l=l[y]=(new z("global, fn","var sandbox = this; return function() { return fn.apply(this == sandbox ? global : this, arguments) }"))(m,l);l.toString=f;return l};c=function(a){return new A(a)};p=function(a){if(a!=null){switch(M.call(a)){case"[object Boolean]":return new Boolean(a);case"[object Number]":return c(a);case"[object String]":return j(a);case"[object Array]":if(a.constructor!==d)return d.fromArray(a)}return a}return new E};n=function(a,b){return new F(a,b)};j=function(a){return new v(arguments.length?a:"")};d.prototype=q.prototype;k.prototype=o.prototype;h.prototype=z.prototype;c.prototype=A.prototype;p.prototype=E.prototype;n.prototype=F.prototype;j.prototype=v.prototype}var i=d.plugin=d.prototype,e=k.plugin=k.prototype,P=h.plugin=h.prototype,Q=p.plugin=p.prototype,t=c.plugin=c.prototype,H=n.plugin=n.prototype,g=j.plugin=j.prototype,R=i.concat,$=i.every,aa=i.filter,ba=i.join,ca=i.indexOf,da=i.lastIndexOf,ea=i.map,S=i.push,fa=i.slice,ga=i.some,T=i.sort,U=i.unshift,ha=e.getDate,ia=e.getDay,ja=e.getFullYear,ka=e.getHours,la=e.getMilliseconds,ma=e.getMinutes,na=e.getMonth,oa=e.getSeconds,pa=e.getTime,qa=e.getTimezoneOffset,ra=e.getUTCDate,sa=e.getUTCDay,ta=e.getUTCFullYear,ua=e.getUTCHours,va=e.getUTCMilliseconds,wa=e.getUTCMinutes,xa=e.getUTCMonth,ya=e.getUTCSeconds,za=e.getYear,Aa=e.toISOString,Ba=e.toJSON,Ca=t.toExponential,Da=t.toFixed,Ea=t.toPrecision,Fa=H.exec,Ga=g.charAt,Ha=g.charCodeAt,V=g.concat,Ia=g.indexOf,Ja=g.lastIndexOf,Ka=g.match,La=g.replace,Ma=g.search,Na=g.slice,Oa=g.split,Pa=g.substr,Qa=g.substring,Ra=g.toLowerCase,Sa=g.toLocaleLowerCase,Ta=g.toLocaleUpperCase,Ua=g.toUpperCase,Va=g.trim;c.MAX_VALUE=1.7976931348623157E308;c.MIN_VALUE=4.9E-324;c.NaN=+"x";c.NEGATIVE_INFINITY=A.NEGATIVE_INFINITY;c.POSITIVE_INFINITY=A.POSITIVE_INFINITY;d.fromArray=function(){var a=function(f){var l=new q;l.push.apply(l,f);return l};if(r===2)a=function(f){f=J.call(f,0);f.__proto__=i;return f};else if(x){var b=q.prototype.slice;a=function(f){return b.call(f,0)}}return a}();d.create=function(){return d.fromArray(arguments)};if(!(d.isArray=q.isArray))d.isArray=function(a){return M.call(a)==="[object Array]"};k.now=function(){var a=function(){return c(+new k)};if(o.now)a=function(){return c(o.now())};return a}();k.parse=function(a){return c(o.parse(a))};k.UTC=function(a,b,f,l,w,B,C){return c(o.UTC(a,b,f||1,l||0,w||0,B||0,C||0))};j.fromCharCode=function(a){return j(arguments.length>1?v.fromCharCode.apply(v,arguments):v.fromCharCode(a))};if(!x)i.concat=function(){var a=arguments;return d.fromArray(a.length?R.apply(this,a):R.call(this))};if(i.every)i.every=function(a,b){return $.call(this,a||K,b)};if(i.filter)i.filter=function(a,b){a=aa.call(this,a||function(f){return f!=null},b);return a.length?d.fromArray(a):d()};i.join=function(a){return j(ba.call(this,a))};if(i.indexOf)i.indexOf=function(a,b){return c(ca.call(this,a,b==null?0:b))};if(i.lastIndexOf)i.lastIndexOf=function(a,b){return c(da.call(this,a,b==null?this.length:b))};if(i.map&&!x)i.map=function(a,b){a=ea.call(this,a||K,b);return a.length?d.fromArray(a):d()};i.push=function(a){var b=arguments;return c(b.length>1?S.apply(this,b):S.call(this,a))};if(!x)i.slice=function(a,b){a=fa.call(this,a,b==null?this.length:b);return a.length?d.fromArray(a):d()};if(i.some)i.some=function(a,b){return ga.call(this,a||K,b)};if(!x)i.sort=function(a){return d.fromArray(a?T.call(this,a):T.call(this))};i.unshift=function(a){var b=arguments;return c(b.length>1?U.apply(this,b):U.call(this,a))};e.getDate=function(){return c(ha.call(this))};e.getDay=function(){return c(ia.call(this))};e.getFullYear=function(){return c(ja.call(this))};e.getHours=function(){return c(ka.call(this))};e.getMilliseconds=function(){return c(la.call(this))};e.getMinutes=function(){return c(ma.call(this))};e.getMonth=function(){return c(na.call(this))};e.getSeconds=function(){return c(oa.call(this))};e.getTime=function(){return c(pa.call(this))};e.getTimezoneOffset=function(){return c(qa.call(this))};e.getUTCDate=function(){return c(ra.call(this))};e.getUTCDay=function(){return c(sa.call(this))};e.getUTCFullYear=function(){return c(ta.call(this))};e.getUTCHours=function(){return c(ua.call(this))};e.getUTCMilliseconds=function(){return c(va.call(this))};e.getUTCMinutes=function(){return c(wa.call(this))};e.getUTCMonth=function(){return c(xa.call(this))};e.getUTCSeconds=function(){return c(ya.call(this))};e.getYear=function(){return c(za.call(this))};if(e.toISOString)e.toISOString=function(){return j(Aa.call(this))};if(e.toJSON)e.toJSON=function(){return j(Ba.call(this))};t.toExponential=function(){return c(Ca.call(this))};t.toFixed=function(){return c(Da.call(this))};t.toPrecision=function(){return c(Ea.call(this))};H.exec=function(a){var b,f=Fa.call(this,a);if(f){a=f.length;for(b=d();a--;)b[a]=j(f[a])}return f&&b};g.charAt=function(a){return j(Ga.call(this,a))};g.charCodeAt=function(a){return c(Ha.call(this,a))};g.concat=function(a){var b=arguments;return j(b.length>1?V.apply(this,b):V.call(this,a))};g.indexOf=function(a,b){return c(Ia.call(this,a,b==null?0:b))};g.lastIndexOf=function(a,b){return c(Ja.call(this,a,b==null?this.length:b))};g.localeCompare=function(a){return c(__localeCompate.call(this,a))};g.match=function(a){var b,f=Ka.call(this,a);if(f){a=f.length;for(b=d();a--;)b[a]=j(f[a])}return f&&b};g.replace=function(a,b){return j(La.call(this,a,b))};g.search=function(a){return c(Ma.call(a))};g.slice=function(a,b){return j(Na.call(this,a,b==null?this.length:b))};g.split=function(a,b){a=Oa.call(this,a,b);b=a.length;for(var f=d();b--;)f[b]=j(a[b]);return f};g.substr=function(a,b){return j(Pa.call(a,b==null?this.length:b))};g.substring=function(a,b){return j(Qa.call(this,a,b==null?this.length:b))};g.toLowerCase=function(){return j(Ra.call(this))};g.toLocaleLowerCase=function(){return j(Sa.call(this))};g.toLocaleUpperCase=function(){return j(Ta.call(this))};g.toUpperCase=function(){return j(Ua.call(this))};if(g.trim)g.trim=function(){return j(Va.call(this))};i.constructor=d;e.constructor=k;P.constructor=h;Q.constructor=p;t.constructor=c;H.constructor=n;g.constructor=j;s.Array=d;s.Date=k;s.Function=h;s.Number=c;s.Object=p;s.RegExp=n;s.String=j;return s},D=function(d){var k=u[u.length-1];k.parentNode.removeChild(k);return d},O=function(){},N=function(){return W()};m.Fusebox={};if(r===3)N=function(){return D(W())};r!=2&&function(){var d;d=L();d=d.Array;x=!(d().slice(0)instanceof m.Array);if(r===3){D();if(d.prototype.map){L();D();try{d().map(K)}catch(k){D=function(h){return function(c){c.Array.prototype.map=c.String.prototype.lastIndexOf=null;return h(c)}}(D)}}for(d=m.document.createElement("div");u.length;){d.appendChild(u.pop());d.innerHTML=""}}u=[];d=d=null}();O.prototype=N.prototype;m.Fusebox=N})(this);
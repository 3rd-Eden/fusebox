/*  Fuse JavaScript framework, version Alpha
 *  (c) 2008-2010 John-David Dalton
 *
 *  FuseJS is freely distributable under the terms of an MIT-style license.
 *  For details, see the FuseJS web site: http://www.fusejs.com/
 *
 *--------------------------------------------------------------------------*/
 
(function(m){var r,X={"boolean":1,number:1,string:1,undefined:1},v=[],y="_fbx"+String(+new Date).slice(-6),I=function(d,k){var i=typeof d[k];return i==="object"?!!d[k]:!X[i]},s=function(){var d,k=m.document;list=[];backup=list.__proto__;if(I(m,"ActiveXObject")&&m.location&&m.location.protocol!=="file:")try{return d=new ActiveXObject("htmlfile")&&1}catch(i){}if([].__proto__===Array.prototype&&{}.__proto__===Object.prototype){list.__proto__={};d=typeof list.push==="undefined";list.__proto__=backup;if(d&&typeof list.push==="function")return 2}if(I(m,"frames")&&k&&I(k,"createElement"))return 3}(),L=function(){if(s===2)return function(){return m};var d=0,k=m.document;if(s===1)return function(){var i=new ActiveXObject("htmlfile");i.open();i.write("<script>document.global = this;<\/script>");i.close();v.push(i);return i.global};if(s===3)return function(){var i,c,p=k.body||k.documentElement,n="sb_"+y+d++;try{c=k.createElement('<iframe name="'+n+'">')}catch(j){(c=k.createElement("iframe")).name=n}c.style.display="none";p.insertBefore(c,p.firstChild);try{(i=m.frames[n].document).open();i.write("<script>parent.Fusebox."+y+" = this;<\/script>");i.close()}catch(J){throw new Error("Fusebox failed to create a sandbox by iframe.");}i=m.Fusebox[y];delete m.Fusebox[y];v.push(c);return i};return function(){throw new Error("Fusebox failed to create a sandbox.");}}(),W=function(){var d,k,i,c,p,n,j,J=m.Array.prototype.slice,Y=m.Function,t=new O,Z=/^\s*(['"])use strict\1/;i=L();var M=m.Object.prototype.toString,q=i.Array,o=i.Date,z=i.Function,A=i.Number,E=i.Object,F=i.RegExp,w=i.String;if(s===2){d=function(a){var b;b=arguments;var f=b.length;b=f?f===1&&a>-1?new q(a):d.fromArray(b):new q;b.__proto__=h;return b};k=function(a,b,f,l,x,B,C){var G;if(this.constructor===k){G=arguments.length===1?new o(a):new o(a,b,f||1,l||0,x||0,B||0,C||0);G.__proto__=e}else G=j(new o);return G};i=function(a,b){var f=arguments;f=f.length<3?z(a,b):z.apply(z,f);f.__proto__=P;return f};c=function(a){a=new A(a);a.__proto__=u;return a};p=function(a){if(a!=null){switch(M.call(a)){case"[object Boolean]":return new Boolean(a);case"[object Number]":return c(a);case"[object String]":return j(a);case"[object Array]":if(a.constructor!==d)return d.fromArray(a)}return a}a=new E;a.__proto__=Q;return a};n=function(a,b){a=new F(a,b);a.__proto__=H;return a};j=function(a){var b=new w(arguments.length?a:"");b.__proto__=g;return b};d.prototype.__proto__=q.prototype;k.prototype.__proto__=o.prototype;i.prototype.__proto__=z.prototype;c.prototype.__proto__=A.prototype;p.prototype.__proto__=E.prototype;n.prototype.__proto__=F.prototype;j.prototype.__proto__=w.prototype}else{d=function(a){var b=arguments,f=b.length;if(f)return f===1&&a>-1?new q(a):d.fromArray(b);return new q};k=function(a,b,f,l,x,B,C){if(this.constructor===k)return arguments.length===1?new o(a):new o(a,b,f||1,l||0,x||0,B||0,C||0);return j(new o)};i=function(a,b){function f(){return x}var l;l=J.call(arguments,0);var x=b=l.pop();a=l.join(",");if(b&&b.search(Z)<0)b="arguments.callee = arguments.callee."+y+"; "+b;l=new Y(a,b);l=l[y]=(new z("global, fn","var sandbox = this; return function() { return fn.apply(this == sandbox ? global : this, arguments) }"))(m,l);l.toString=f;return l};c=function(a){return new A(a)};p=function(a){if(a!=null){switch(M.call(a)){case"[object Boolean]":return new Boolean(a);case"[object Number]":return c(a);case"[object String]":return j(a);case"[object Array]":if(a.constructor!==d)return d.fromArray(a)}return a}return new E};n=function(a,b){return new F(a,b)};j=function(a){return new w(arguments.length?a:"")};d.prototype=q.prototype;k.prototype=o.prototype;i.prototype=z.prototype;c.prototype=A.prototype;p.prototype=E.prototype;n.prototype=F.prototype;j.prototype=w.prototype}var h=d.plugin=d.prototype,e=k.plugin=k.prototype,P=i.plugin=i.prototype,Q=p.plugin=p.prototype,u=c.plugin=c.prototype,H=n.plugin=n.prototype,g=j.plugin=j.prototype,R=h.concat,$=h.every,aa=h.filter,ba=h.join,ca=h.indexOf,da=h.lastIndexOf,ea=h.map,S=h.push,fa=h.reverse,ga=h.slice,ha=h.splice,ia=h.some,T=h.sort,U=h.unshift,ja=e.getDate,ka=e.getDay,la=e.getFullYear,ma=e.getHours,na=e.getMilliseconds,oa=e.getMinutes,pa=e.getMonth,qa=e.getSeconds,ra=e.getTime,sa=e.getTimezoneOffset,ta=e.getUTCDate,ua=e.getUTCDay,va=e.getUTCFullYear,wa=e.getUTCHours,xa=e.getUTCMilliseconds,ya=e.getUTCMinutes,za=e.getUTCMonth,Aa=e.getUTCSeconds,Ba=e.getYear,Ca=e.toISOString,Da=e.toJSON,Ea=u.toExponential,Fa=u.toFixed,Ga=u.toPrecision,Ha=H.exec,Ia=g.charAt,Ja=g.charCodeAt,V=g.concat,Ka=g.indexOf,La=g.lastIndexOf,Ma=g.match,Na=g.replace,Oa=g.search,Pa=g.slice,Qa=g.split,Ra=g.substr,Sa=g.substring,Ta=g.toLowerCase,Ua=g.toLocaleLowerCase,Va=g.toLocaleUpperCase,Wa=g.toUpperCase,Xa=g.trim;c.MAX_VALUE=1.7976931348623157E308;c.MIN_VALUE=4.9E-324;c.NaN=+"x";c.NEGATIVE_INFINITY=A.NEGATIVE_INFINITY;c.POSITIVE_INFINITY=A.POSITIVE_INFINITY;d.fromArray=function(){var a=function(f){var l=new q;l.push.apply(l,f);return l};if(s===2)a=function(f){f=J.call(f,0);f.__proto__=h;return f};else if(r){var b=q.prototype.slice;a=function(f){return b.call(f,0)}}return a}();d.create=function(){return d.fromArray(arguments)};if(!(d.isArray=q.isArray))d.isArray=function(a){return M.call(a)==="[object Array]"};k.now=function(){var a=function(){return c(+new k)};if(o.now)a=function(){return c(o.now())};return a}();k.parse=function(a){return c(o.parse(a))};k.UTC=function(a,b,f,l,x,B,C){return c(o.UTC(a,b,f||1,l||0,x||0,B||0,C||0))};j.fromCharCode=function(a){return j(arguments.length>1?w.fromCharCode.apply(w,arguments):w.fromCharCode(a))};if(!r)h.concat=function(){var a=arguments;return d.fromArray(a.length?R.apply(this,a):R.call(this))};if(h.every)h.every=function(a,b){return $.call(this,a||K,b)};if(h.filter)h.filter=function(a,b){a=aa.call(this,a||function(f){return f!=null},b);return a.length?d.fromArray(a):d()};h.join=function(a){return j(ba.call(this,a))};if(h.indexOf)h.indexOf=function(a,b){return c(ca.call(this,a,b==null?0:b))};if(h.lastIndexOf)h.lastIndexOf=function(a,b){return c(da.call(this,a,b==null?this.length:b))};if(h.map&&!r)h.map=function(a,b){a=ea.call(this,a||K,b);return a.length?d.fromArray(a):d()};h.push=function(a){var b=arguments;return c(b.length>1?S.apply(this,b):S.call(this,a))};if(!r)h.reverse=function(){return this.length>0?d.fromArray(fa.call(this)):d()};if(!r)h.slice=function(a,b){a=ga.call(this,a,b==null?this.length:b);return a.length?d.fromArray(a):d()};if(h.some)h.some=function(a,b){return ia.call(this,a||K,b)};if(!r)h.sort=function(a){return this.length>0?d.fromArray(a?T.call(this,a):T.call(this)):d()};if(!r)h.splice=function(){var a=ha.apply(this,arguments);return a.length?d.fromArray(a):d()};h.unshift=function(a){var b=arguments;return c(b.length>1?U.apply(this,b):U.call(this,a))};e.getDate=function(){return c(ja.call(this))};e.getDay=function(){return c(ka.call(this))};e.getFullYear=function(){return c(la.call(this))};e.getHours=function(){return c(ma.call(this))};e.getMilliseconds=function(){return c(na.call(this))};e.getMinutes=function(){return c(oa.call(this))};e.getMonth=function(){return c(pa.call(this))};e.getSeconds=function(){return c(qa.call(this))};e.getTime=function(){return c(ra.call(this))};e.getTimezoneOffset=function(){return c(sa.call(this))};e.getUTCDate=function(){return c(ta.call(this))};e.getUTCDay=function(){return c(ua.call(this))};e.getUTCFullYear=function(){return c(va.call(this))};e.getUTCHours=function(){return c(wa.call(this))};e.getUTCMilliseconds=function(){return c(xa.call(this))};e.getUTCMinutes=function(){return c(ya.call(this))};e.getUTCMonth=function(){return c(za.call(this))};e.getUTCSeconds=function(){return c(Aa.call(this))};e.getYear=function(){return c(Ba.call(this))};if(e.toISOString)e.toISOString=function(){return j(Ca.call(this))};if(e.toJSON)e.toJSON=function(){return j(Da.call(this))};u.toExponential=function(){return c(Ea.call(this))};u.toFixed=function(){return c(Fa.call(this))};u.toPrecision=function(){return c(Ga.call(this))};H.exec=function(a){var b,f=Ha.call(this,a);if(f){a=f.length;for(b=d();a--;)b[a]=j(f[a])}return f&&b};g.charAt=function(a){return j(Ia.call(this,a))};g.charCodeAt=function(a){return c(Ja.call(this,a))};g.concat=function(a){var b=arguments;return j(b.length>1?V.apply(this,b):V.call(this,a))};g.indexOf=function(a,b){return c(Ka.call(this,a,b==null?0:b))};g.lastIndexOf=function(a,b){return c(La.call(this,a,b==null?this.length:b))};g.localeCompare=function(a){return c(__localeCompate.call(this,a))};g.match=function(a){var b,f=Ma.call(this,a);if(f){a=f.length;for(b=d();a--;)b[a]=j(f[a])}return f&&b};g.replace=function(a,b){return j(Na.call(this,a,b))};g.search=function(a){return c(Oa.call(a))};g.slice=function(a,b){return j(Pa.call(this,a,b==null?this.length:b))};g.split=function(a,b){a=Qa.call(this,a,b);b=a.length;for(var f=d();b--;)f[b]=j(a[b]);return f};g.substr=function(a,b){return j(Ra.call(a,b==null?this.length:b))};g.substring=function(a,b){return j(Sa.call(this,a,b==null?this.length:b))};g.toLowerCase=function(){return j(Ta.call(this))};g.toLocaleLowerCase=function(){return j(Ua.call(this))};g.toLocaleUpperCase=function(){return j(Va.call(this))};g.toUpperCase=function(){return j(Wa.call(this))};if(g.trim)g.trim=function(){return j(Xa.call(this))};h.constructor=d;e.constructor=k;P.constructor=i;Q.constructor=p;u.constructor=c;H.constructor=n;g.constructor=j;t.Array=d;t.Date=k;t.Function=i;t.Number=c;t.Object=p;t.RegExp=n;t.String=j;return t},D=function(d){var k=v[v.length-1];k.parentNode.removeChild(k);return d},O=function(){},N=function(){return W()};m.Fusebox={};if(s===3)N=function(){return D(W())};s!=2&&function(){var d;d=L();d=d.Array;r=!(d().slice(0)instanceof m.Array);if(s===3){D();if(d.prototype.map){L();D();try{d().map(K)}catch(k){D=function(i){return function(c){c.Array.prototype.map=c.String.prototype.lastIndexOf=null;return i(c)}}(D)}}for(d=m.document.createElement("div");v.length;){d.appendChild(v.pop());d.innerHTML=""}}v=[];d=d=null}();O.prototype=N.prototype;m.Fusebox=N})(this);